#!/usr/bin/env ruby
# frozen_string_literal: true

min_rails_version = '5.2.0'

# Check that a supported Rails version is installed globally.
rails_version = `rails -v`.gsub('Rails ', '')
rails_version = Gem::Version.new(rails_version)

# This condition will also be true if Rails is not installed.
if rails_version < Gem::Version.new(min_rails_version)
  puts 'Please update your Rails version to 5.2.0 or higher!'
  exit
end

template_directory = File.expand_path('../lib/generators/templates', __dir__)
template_file = File.join(template_directory, 'default.rb')

# Run default rails installer
system("rails new #{ARGV.join(' ')} -m #{template_file}")
